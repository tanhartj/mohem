# ูุงุดู ูุงุฑุงู ูุชูุจ - ุณุณุชู 15 ูุฏู ุฏุฑ ุฑูุฒ

## ๐ฏ ูุฏู ูพุฑูฺู

ุงู ูพุฑูฺู ฺฉ ุณุณุชู **ุญุฑููโุง ู ุชููุฏ ูุญุชูุง ุฎูุฏฺฉุงุฑ** ุจุฑุง ูุชูุจ ุงุณุช ฺฉู **15 ูุฏู ุฏุฑ ูุฑ 24 ุณุงุนุช** ุจุฑุง ูุฑ ฺฉุงูุงู ูุชุตู ููุชุดุฑ ูโฺฉูุฏ.

## โ ูุงุจูุชโูุง ุงุตู

### 1. ุฒูุงูโุจูุฏ ููุดููุฏ 15 ูุฏู ุฏุฑ ุฑูุฒ
- ูุงุตููโฺฏุฐุงุฑ ุฏูู: ูุฑ 96 ุฏููู ฺฉ ูุฏู
- ุชุตุงุฏูโุณุงุฒ ยฑ15 ุฏูููโุง ุจุฑุง ุทุจุนโุชุฑ ุจูุฏู
- ุตู ูพุฑุฏุงุฒุด ูุฏุฑุชููุฏ ุจุง Bull Queue ู Redis
- ุชูุงุด ูุฌุฏุฏ ุฎูุฏฺฉุงุฑ ุฏุฑ ุตูุฑุช ุฎุทุง (5 ุจุงุฑ ุจุง ุชุฃุฎุฑ ุชุตุงุนุฏ)

### 2. ุชููุฏ ูุญุชูุง ููุดููุฏ
- **ุญุงูุช ููุด ูุตููุน**: ุงุณุชูุงุฏู ุงุฒ OpenAI GPT-4 ุจุฑุง ุชููุฏ ูุญุชูุง
- **ุญุงูุช Fallback**: ุงูฺฏููุง ุงุฒ ูพุด ุขูุงุฏู (ุจุฏูู ูุงุฒ ุจู API Key)
- 4 ุฏุณุชู ูุญุชูุง: ุงูฺฏุฒุดุ ุญูุงู ุนููุ ูุงูุ ุฑูุงูุดูุงุณ
- ุชููุฏ ุฎูุฏฺฉุงุฑ: ุนููุงูุ ุชูุถุญุงุชุ ูุดุชฺฏโูุงุ ุงุณฺฉุฑูพุช

### 3. ูุฑุงุด ูุฏู ุญุฑููโุง
- ุชููุฏ Thumbnail ุฌุฐุงุจ ุจุง Sharp
- ุฑูุฏุฑ ูุฏู ุจุง FFmpeg
- ูพุดุชุจุงู ุงุฒ ูุงูุจโูุง ูุฎุชูู
- ฺฉูุช HD

### 4. ุขูพููุฏ ูุฏุฑุชููุฏ ุจู ูุชูุจ
- ุงุญุฑุงุฒ ููุช OAuth2 ุฎูุฏฺฉุงุฑ
- ุขูพููุฏ ูุงุจู ุงุฒุณุฑฺฏุฑ (ุฏุฑ ุตูุฑุช ูุทุน ุงุฏุงูู ูโุงุจุฏ)
- ูุฏุฑุช ุฎูุฏฺฉุงุฑ ูุญุฏูุฏุช ูุฑุฎ (Rate Limiting)
- ุชูุงุด ูุฌุฏุฏ ููุดููุฏ

### 5. ูุธุงุฑุช ู ูุงูุชูุฑูฺฏ
- ุฏุงุดุจูุฑุฏ ูุจ ุฑู ูพูุฑุช 5000
- Health Check: `/healthz`
- ูุงฺฏโูุง ุณุงุฎุชุงุฑุงูุชู ุจุง Winston
- ุงุนูุงูโูุง ุชูฺฏุฑุงู ุจุฑุง ุฑูุฏุงุฏูุง ููู

### 6. ุงููุช
- Helmet middleware ุจุฑุง ุงููุช HTTP
- Rate Limiting ุฑู APIูุง
- ุฑูุฒฺฏุฐุงุฑ ุฑูุฒุนุจูุฑ ุจุง bcrypt
- ูุฏุฑุช ุงูู ูุชุบุฑูุง ูุญุท

## ๐ฆ ูุตุจ ู ุฑุงูโุงูุฏุงุฒ

### ูพุดโูุงุฒูุง

```bash
# Node.js 20 ุง ุจุงูุงุชุฑ
node --version

# Redis (ุถุฑูุฑ!)
# ฺฏุฒูู 1: ูุตุจ ูุญู
brew install redis  # macOS
sudo apt-get install redis-server  # Linux

# ฺฏุฒูู 2: Docker
docker run -d -p 6379:6379 redis:7-alpine

# ฺฏุฒูู 3: ุณุฑูุณ ุงุจุฑ (ุชูุตู ุจุฑุง Replit)
# Upstash: https://upstash.com/
# Redis Cloud: https://redis.com/
```

### ูุฑุงุญู ูุตุจ

#### 1. ูุตุจ ูุงุจุณุชฺฏโูุง
```bash
npm install
```

#### 2. ุชูุธู ูุชุบุฑูุง ูุญุท
```bash
# ฺฉูพ ูุงู ููููู
cp .env.example .env

# ูุฑุงุด .env ู ุชูุธู:
# - REDIS_URL (ุถุฑูุฑ)
# - OPENAI_API_KEY (ุงุฎุชุงุฑ - ุงฺฏุฑ ูุจุงุดุฏ ุงุฒ Fallback ุงุณุชูุงุฏู ูโุดูุฏ)
# - TELEGRAM_BOT_TOKEN (ุงุฎุชุงุฑ)
# - YT_CLIENT_ID ู YT_CLIENT_SECRET (ุถุฑูุฑ ุจุฑุง ุขูพููุฏ)
```

#### 3. ุฑุงูโุงูุฏุงุฒ ุฏุชุงุจุณ
```bash
npm run init-db
```

ุงู ุฏุณุชูุฑ:
- ุฌุฏุงูู ุฏุชุงุจุณ ุฑุง ุงุฌุงุฏ ูโฺฉูุฏ
- ฺฉุงุฑุจุฑ ุงุฏูู ุจุง ูุฒุฑูู `admin` ู ูพุณูุฑุฏ `changeme` ูโุณุงุฒุฏ
- ุงูุฏฺฉุณโูุง ุฑุง ุจุฑุง ุจูุจูุฏ ุนููฺฉุฑุฏ ุงุถุงูู ูโฺฉูุฏ

#### 4. ุฑุงูโุงูุฏุงุฒ ุณุฑูุฑ
```bash
# ุญุงูุช Development
npm run dev

# ุญุงูุช Production
npm start
```

#### 5. ุฑุงูโุงูุฏุงุฒ Worker (ุชุฑููุงู ุฌุฏุงฺฏุงูู)
```bash
npm run worker
```

## ๐ณ ุงุฌุฑุง ุจุง Docker

```bash
# ุฑุงูโุงูุฏุงุฒ ฺฉู ุณุณุชู (App + Redis)
docker-compose up

# ุฏุฑ ูพุณโุฒููู
docker-compose up -d

# ูุดุงูุฏู ูุงฺฏโูุง
docker-compose logs -f

# ูุชููู ฺฉุฑุฏู
docker-compose down
```

## ๐ ุฏุฑุงูุช API Keys

### 1. YouTube API (ุถุฑูุฑ ุจุฑุง ุขูพููุฏ)

1. ุจุฑู ุจู [Google Cloud Console](https://console.cloud.google.com/)
2. ูพุฑูฺู ุฌุฏุฏ ุจุณุงุฒ ุง ฺฉ ุฑุง ุงูุชุฎุงุจ ฺฉู
3. YouTube Data API v3 ุฑุง ูุนุงู ฺฉู
4. Credentials โ Create OAuth 2.0 Client ID
5. Redirect URI ุฑุง ุชูุธู ฺฉู: `http://localhost:5000/auth/youtube/callback`
6. Client ID ู Secret ุฑุง ุฏุฑ `.env` ูุฑุงุฑ ุจุฏู

### 2. OpenAI API (ุงุฎุชุงุฑ)

1. ุจุฑู ุจู [OpenAI Platform](https://platform.openai.com/)
2. API Key ุจุณุงุฒ
3. ุฏุฑ `.env` ูุฑุงุฑ ุจุฏู: `OPENAI_API_KEY=sk-...`

**ูฺฉุชู**: ุงฺฏุฑ ุงู ฺฉูุฏ ุฑุง ูุฏุงุดุชู ุจุงุดุฏุ ุณุณุชู ุงุฒ ุชููุฏฺฉููุฏู Fallback ุงุณุชูุงุฏู ูโฺฉูุฏ.

### 3. Telegram Bot (ุงุฎุชุงุฑ)

1. ุจุง [@BotFather](https://t.me/botfather) ุฏุฑ ุชูฺฏุฑุงู ฺุช ฺฉู
2. `/newbot` ุฑุง ุจูุฑุณุช
3. ุฏุณุชูุฑุงุช ุฑุง ุฏูุจุงู ฺฉู
4. ุชูฺฉู ุฑุง ุฏุฑ `.env` ูุฑุงุฑ ุจุฏู

## ๐ ุงุณุชูุงุฏู

### 1. ุงุชุตุงู ฺฉุงูุงู ูุชูุจ

```bash
# ูุฑูุฑฺฏุฑ ุฑุง ุจุงุฒ ฺฉู ู ุจุฑู ุจู:
http://localhost:5000/auth/youtube

# ุจุง ุญุณุงุจ ฺฏูฺฏู ุฎูุฏ ูุงุฑุฏ ุดู
# ูุฌูุฒูุง ุฑุง ุชุฃุฏ ฺฉู
# ฺฉุงูุงู ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุงุถุงูู ูโุดูุฏ
```

### 2. ุจุฑุฑุณ ูุถุนุช ุณุณุชู

```bash
# Health Check
curl http://localhost:5000/healthz

# ุจุงุฏ ุจุจูุฏ:
{
  "status": "ok",
  "timestamp": "...",
  "services": {
    "database": { "status": "ok" },
    "redis": { "status": "ok", "connected": true },
    "queue": { "status": "ok", "waiting": 0, "active": 0 }
  }
}
```

### 3. ุชูุธู ุชุนุฏุงุฏ ูุฏููุง ุฏุฑ ุฑูุฒ

```bash
# ุจุฑุง ุชุบุฑ ุงุฒ 15 ุจู ุนุฏุฏ ุฏูุฎูุงู:
curl -X POST http://localhost:5000/admin/channels/CHANNEL_ID/videos-per-day \
  -H "Content-Type: application/json" \
  -d '{"videosPerDay": 10}'
```

### 4. ูุดุงูุฏู ูุงฺฏโูุง

```bash
# ูุงฺฏโูุง ุฏุฑ ูููุฏุฑ logs/ ุฐุฎุฑู ูโุดููุฏ
tail -f logs/app-2025-11-16.log
tail -f logs/error-2025-11-16.log
```

## ๐ ุณุงุฎุชุงุฑ ูพุฑูฺู

```
youtube-viral-bot/
โโโ core/                   # ูุณุชู ุงุตู
โ   โโโ index.js           # ููุทู ูุฑูุฏ ุงุตู
โ   โโโ api.js             # API routes
โ   โโโ orchestrator.js    # ููุงููฺฏโฺฉููุฏู
โ
โโโ modules/               # ูุงฺููโูุง ูุงุจูุช
โ   โโโ generator.js       # ุชููุฏ ูุญุชูุง ุจุง AI
โ   โโโ fallbackGenerator.js  # ุชููุฏ ุจุฏูู API
โ   โโโ thumbnailer.js     # ุณุงุฎุช Thumbnail
โ   โโโ render.js          # ุฑูุฏุฑ ูุฏู
โ   โโโ uploader.js        # ุขูพููุฏ ุจู ูุชูุจ
โ
โโโ schedulers/            # ุณุณุชู ุฒูุงูโุจูุฏ
โ   โโโ dailyScheduler.js  # ุฒูุงูโุจูุฏ 15 ูุฏู/ุฑูุฒ
โ
โโโ queues/                # ุณุณุชู ุตู
โ   โโโ videoQueue.js      # ุตู ูพุฑุฏุงุฒุด ุจุง Bull
โ
โโโ workers/               # ฺฉุงุฑฺฏุฑูุง
โ   โโโ videoProcessor.js  # ูพุฑุฏุงุฒุดโฺฉููุฏู ูุฏู
โ
โโโ lib/                   # ฺฉุชุงุจุฎุงููโูุง
โ   โโโ youtubeClient.js   # ฺฉูุงูุช ูุชูุจ
โ
โโโ routes/                # ูุณุฑูุง ูุจ
โ   โโโ auth.js           # ุงุญุฑุงุฒ ููุช
โ   โโโ admin.js          # ูุฏุฑุช
โ
โโโ telegram/              # ุฑุจุงุช ุชูฺฏุฑุงู
โ   โโโ notifications.js   # ุงุนูุงูโูุง
โ
โโโ utils/                 # ุงุจุฒุงุฑูุง
โ   โโโ db.js             # ุฏุชุงุจุณ SQLite
โ   โโโ logger.js         # ูุงฺฏุฑ
โ   โโโ retry.js          # ุชูุงุด ูุฌุฏุฏ
โ   โโโ healthChecks.js   # ุจุฑุฑุณ ุณูุงูุช
โ
โโโ __tests__/             # ุชุณุชโูุง
โ   โโโ scheduler.test.js
โ   โโโ fallback.test.js
โ   โโโ health.test.js
โ
โโโ scripts/               # ุงุณฺฉุฑูพุชโูุง
โ   โโโ init-db.js        # ุฑุงูโุงูุฏุงุฒ ุฏุชุงุจุณ
โ
โโโ public/                # ูุงูโูุง ุงุณุชุงุชฺฉ
โโโ assets/                # ูุงูุจโูุง ู ุฏุงุฑุงโูุง
โโโ temp/                  # ูุงูโูุง ูููุช
โโโ logs/                  # ูุงฺฏโูุง
โโโ data/                  # ุฏุชุงุจุณ
```

## ๐ง ุนุจโุงุจ

### ูุดฺฉู: Redis Connection Refused

```
Error: connect ECONNREFUSED 127.0.0.1:6379
```

**ุฑุงู ุญู**:
1. ูุทูุฆู ุดู Redis ุฏุฑ ุญุงู ุงุฌุฑุงุณุช: `redis-cli ping` (ุจุงุฏ `PONG` ุจุฑฺฏุฑุฏุงูุฏ)
2. ุง ุงุฒ ุณุฑูุณ ุงุจุฑ ุงุณุชูุงุฏู ฺฉู ู `REDIS_URL` ุฑุง ุชูุธู ฺฉู

### ูุดฺฉู: YouTube Upload Failed

```
Error: Invalid credentials
```

**ุฑุงู ุญู**:
1. ุงุฒ ุตุญุช `YT_CLIENT_ID` ู `YT_CLIENT_SECRET` ุงุทููุงู ุญุงุตู ฺฉู
2. Redirect URI ุฑุง ฺฺฉ ฺฉู
3. ุชูฺฉู ุฑุง Revoke ฺฉู ู ุฏูุจุงุฑู ูุงุฑุฏ ุดู

### ูุดฺฉู: FFmpeg Not Found

```
Error: ffmpeg not found
```

**ุฑุงู ุญู**:
```bash
# macOS
brew install ffmpeg

# Ubuntu/Linux
sudo apt-get install ffmpeg

# ุง ุงุฒ Docker ุงุณุชูุงุฏู ฺฉู (FFmpeg ุงุฒ ูุจู ูุตุจ ุงุณุช)
```

### ูุดฺฉู: Out of Memory

**ุฑุงู ุญู**:
- ุชุนุฏุงุฏ `MAX_CONCURRENT_JOBS` ุฑุง ุฏุฑ `.env` ฺฉุงูุด ุจุฏู (ูุซูุงู ุงุฒ 3 ุจู 1)
- ุญุงูุธู Docker ุฑุง ุงูุฒุงุด ุจุฏู

## ๐ ูุงูุชูุฑูฺฏ ู ุขูุงูุชฺฉ

### Endpoints ููุฏ

- `GET /` - ุฏุงุดุจูุฑุฏ ุงุตู
- `GET /healthz` - ูุถุนุช ุณูุงูุช ุณุณุชู
- `GET /health` - ุจุฑุฑุณ ุณุงุฏู

### ูุดุงูุฏู ุขูุงุฑ ุตู

```bash
# ุจุง redis-cli
redis-cli
> KEYS bull:video:*
> HGETALL bull:video:active
> HGETALL bull:video:waiting
```

## ๐ ุงููุช

### ุชุบุฑ ุฑูุฒ ุงุฏูู

```bash
# ูพุณูุฑุฏ ูพุดโูุฑุถ: changeme
# ุญุชูุงู ุชุบุฑ ุจุฏู!

# ุฑูุด 1: ุงุฒ ุฏุงุฎู ฺฉุฏ
npm run init-db  # ู ฺฉุฏ ุฑุง ูุฑุงุด ฺฉู

# ุฑูุด 2: ูุณุชูู ุฏุฑ ุฏุชุงุจุณ
sqlite3 data/bot.db
UPDATE admins SET password = '$2b$10$NEW_HASH' WHERE username = 'admin';
```

### ูุญุงูุธุช ุฏุฑ Production

1. ููุดู ุงุฒ HTTPS ุงุณุชูุงุฏู ฺฉู
2. ูุชุบุฑูุง ูุญุท ุฑุง ุงูู ูฺฏู ุฏุงุฑ
3. Rate Limiting ุฑุง ูุนุงู ฺฉู
4. ูุงฺฏโูุง ุฑุง ูุงูุชูุฑ ฺฉู
5. Redis ุฑุง ุจุง ุฑูุฒ ูุญุงูุธุช ฺฉู

## ๐ข ุงุณุชูุฑุงุฑ ุฏุฑ Production

### Heroku

```bash
# ุงุถุงูู ฺฉุฑุฏู Redis addon
heroku addons:create heroku-redis:hobby-dev

# ุชูุธู ูุชุบุฑูุง
heroku config:set OPENAI_API_KEY=sk-...
heroku config:set YT_CLIENT_ID=...

# ุฏูพูู
git push heroku feature/15-per-day:main
```

### Render

1. ุณุฑูุณ Redis ุฌุฏุงฺฏุงูู ุจุณุงุฒ
2. Web Service ุฌุฏุฏ ุงุฒ ุงู repo ุจุณุงุฒ
3. ูุชุบุฑูุง ูุญุท ุฑุง ุชูุธู ฺฉู
4. ุฏูพูู ุฎูุฏฺฉุงุฑ ูุนุงู ูโุดูุฏ

### VPS (ูุซู DigitalOcean)

```bash
# ูุตุจ Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sh get-docker.sh

# ฺฉููู ูพุฑูฺู
git clone [YOUR_REPO]

# ุงุฌุฑุง
docker-compose up -d
```

## ๐งช ุชุณุชโูุง

```bash
# ุงุฌุฑุง ุชูุงู ุชุณุชโูุง
npm test

# ุงุฌุฑุง ุชุณุช ุฎุงุต
npm test -- scheduler.test.js

# ุจุง coverage
npm test -- --coverage
```

**ูฺฉุชู**: ุฏุฑ ุญุงู ุญุงุถุฑ ุชุณุชโูุง ูุงุฒ ุจู ุชูุธู ES modules ุฏุงุฑูุฏ.

## ๐ ูุงุณูุณ

ุงู ูพุฑูฺู ุชุญุช ูุงุณูุณ MIT ููุชุดุฑ ุดุฏู ุงุณุช.

## ๐ค ูุดุงุฑฺฉุช

1. Fork ฺฉูุฏ
2. ุจุฑูฺ ุฌุฏุฏ ุจุณุงุฒุฏ: `git checkout -b feature/amazing-feature`
3. ุชุบุฑุงุช ุฑุง commit ฺฉูุฏ: `git commit -m 'Add amazing feature'`
4. Push ฺฉูุฏ: `git push origin feature/amazing-feature`
5. Pull Request ุจุงุฒ ฺฉูุฏ

## ๐ ูพุดุชุจุงู

- ูุณุชูุฏุงุช ฺฉุงูู: `DONE.md`
- ูุดฺฉูุงุช ุฑุงุฌ: ุจุฎุด ุนุจโุงุจ
- Health Check: `/healthz`

## โจ ูฺฺฏโูุง ุขูุฏู

- [ ] ูพุดุชุจุงู ุงุฒ TikTok ู Instagram
- [ ] ุฏุงุดุจูุฑุฏ ุขูุงูุชฺฉ ูพุดุฑูุชู
- [ ] ุงุฏฺฏุฑ ูุงุดู ุงุฒ ูุฏููุง ูููู
- [ ] ุชููุฏ ุฎูุฏฺฉุงุฑ Subtitle
- [ ] ูพุดุชุจุงู ุงุฒ ฺูุฏ ุฒุจุงู

---

**ูฺฉุชู ููู**: ูุจู ุงุฒ ุงุณุชูุงุฏู ุฏุฑ Productionุ ุญุชูุงู Redis ุฑุง ูุตุจ ฺฉูุฏ ู ุชูุธูุงุช ุงููุช ุฑุง ุงูุฌุงู ุฏูุฏ!

๐ฌ ูููู ุจุงุดุฏ!
